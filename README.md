# å…¬å¸å†…éƒ¨åˆ©æ¶¦ç®¡ç†ç³»ç»Ÿ

ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„å…¬å¸å†…éƒ¨åˆ©æ¶¦ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒåˆ©æ¶¦æ•°æ®çš„å½•å…¥ã€ç®¡ç†ã€åˆ†æå’ŒæŠ¥è¡¨ç”Ÿæˆã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ“Š æ ¸å¿ƒåŠŸèƒ½
- **åˆ©æ¶¦ç®¡ç†**: æ”¯æŒåˆ©æ¶¦æ•°æ®çš„å¢åˆ æ”¹æŸ¥
- **éƒ¨é—¨ç®¡ç†**: ç®¡ç†å…¬å¸å„éƒ¨é—¨ä¿¡æ¯
- **æ•°æ®å¯¼å…¥**: æ”¯æŒExcelæ–‡ä»¶æ‰¹é‡å¯¼å…¥åˆ©æ¶¦æ•°æ®
- **æ•°æ®å¯¼å‡º**: æ”¯æŒå°†æ•°æ®å¯¼å‡ºä¸ºExcelæŠ¥è¡¨
- **å›¾è¡¨åˆ†æ**: å¤šç§å›¾è¡¨å±•ç¤ºåˆ©æ¶¦è¶‹åŠ¿å’Œéƒ¨é—¨åˆ†å¸ƒ
- **æŠ¥è¡¨ç”Ÿæˆ**: è‡ªåŠ¨ç”Ÿæˆåˆ©æ¶¦åˆ†ææŠ¥è¡¨

### ğŸ¯ ä¸»è¦é¡µé¢
- **ä»ªè¡¨ç›˜**: æ€»è§ˆåˆ©æ¶¦ç»Ÿè®¡å’Œè¶‹åŠ¿å›¾è¡¨
- **åˆ©æ¶¦ç®¡ç†**: åˆ©æ¶¦è®°å½•çš„åˆ—è¡¨å’Œç¼–è¾‘
- **éƒ¨é—¨ç®¡ç†**: éƒ¨é—¨ä¿¡æ¯çš„ç»´æŠ¤
- **æ•°æ®å¯¼å…¥**: Excelæ–‡ä»¶ä¸Šä¼ å’Œè§£æ
- **æŠ¥è¡¨åˆ†æ**: è¯¦ç»†çš„æ•°æ®åˆ†æå’ŒæŠ¥è¡¨

### ğŸ’¼ æŠ€æœ¯æ ˆ
- **åç«¯**: Node.js + Express + MongoDB
- **å‰ç«¯**: React + TypeScript + Ant Design
- **å›¾è¡¨**: Recharts
- **çŠ¶æ€ç®¡ç†**: React Query
- **æ–‡ä»¶å¤„ç†**: Multer + XLSX

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js >= 16.0.0
- MongoDB >= 4.4.0
- npm æˆ– yarn

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
```bash
git clone <repository-url>
cd profit-management-system
```

2. **å®‰è£…åç«¯ä¾èµ–**
```bash
npm install
```

3. **å®‰è£…å‰ç«¯ä¾èµ–**
```bash
cd client
npm install
cd ..
```

4. **é…ç½®ç¯å¢ƒå˜é‡**
åˆ›å»º `.env` æ–‡ä»¶ï¼š
```env
NODE_ENV=development
PORT=5000
MONGODB_URI=mongodb://localhost:27017/profit_management
JWT_SECRET=your_jwt_secret_key_here
```

5. **å¯åŠ¨MongoDB**
ç¡®ä¿MongoDBæœåŠ¡æ­£åœ¨è¿è¡Œ

6. **å¯åŠ¨åº”ç”¨**
```bash
# å¯åŠ¨åç«¯æœåŠ¡
npm start

# å¯åŠ¨å‰ç«¯æœåŠ¡ï¼ˆæ–°ç»ˆç«¯çª—å£ï¼‰
cd client
npm start
```

7. **è®¿é—®åº”ç”¨**
- å‰ç«¯åº”ç”¨: http://localhost:3000
- åç«¯API: http://localhost:5000

## ä½¿ç”¨è¯´æ˜

### æ•°æ®å¯¼å…¥
1. è¿›å…¥"æ•°æ®å¯¼å…¥"é¡µé¢
2. ä¸‹è½½Excelæ¨¡æ¿æ–‡ä»¶
3. æŒ‰ç…§æ¨¡æ¿æ ¼å¼å¡«å†™æ•°æ®
4. ä¸Šä¼ Excelæ–‡ä»¶å®Œæˆå¯¼å…¥

### Excelæ¨¡æ¿æ ¼å¼
| å­—æ®µå | è¯´æ˜ | å¿…å¡« | ç¤ºä¾‹ |
|--------|------|------|------|
| department | éƒ¨é—¨åç§° | æ˜¯ | é”€å”®éƒ¨ |
| project | é¡¹ç›®åç§° | æ˜¯ | é¡¹ç›®A |
| period | æœŸé—´ | æ˜¯ | 2025-01 |
| revenue | æ”¶å…¥ | æ˜¯ | 100000 |
| cost | æˆæœ¬ | æ˜¯ | 80000 |
| materialCost | ææ–™æˆæœ¬ | å¦ | 40000 |
| laborCost | äººå·¥æˆæœ¬ | å¦ | 25000 |
| overheadCost | ç®¡ç†è´¹ç”¨ | å¦ | 10000 |
| otherCost | å…¶ä»–æˆæœ¬ | å¦ | 5000 |
| description | æè¿° | å¦ | é¡¹ç›®æè¿° |

### APIæ¥å£

#### åˆ©æ¶¦ç®¡ç†
- `GET /api/profits` - è·å–åˆ©æ¶¦åˆ—è¡¨
- `POST /api/profits` - åˆ›å»ºåˆ©æ¶¦è®°å½•
- `PUT /api/profits/:id` - æ›´æ–°åˆ©æ¶¦è®°å½•
- `DELETE /api/profits/:id` - åˆ é™¤åˆ©æ¶¦è®°å½•
- `GET /api/profits/stats/summary` - è·å–æ±‡æ€»ç»Ÿè®¡
- `GET /api/profits/stats/by-department` - è·å–éƒ¨é—¨ç»Ÿè®¡
- `GET /api/profits/stats/trend` - è·å–è¶‹åŠ¿æ•°æ®

#### éƒ¨é—¨ç®¡ç†
- `GET /api/departments` - è·å–éƒ¨é—¨åˆ—è¡¨
- `POST /api/departments` - åˆ›å»ºéƒ¨é—¨
- `PUT /api/departments/:id` - æ›´æ–°éƒ¨é—¨
- `DELETE /api/departments/:id` - åˆ é™¤éƒ¨é—¨

#### æ–‡ä»¶å¤„ç†
- `POST /api/upload/excel` - ä¸Šä¼ Excelæ–‡ä»¶
- `GET /api/upload/template` - ä¸‹è½½Excelæ¨¡æ¿
- `POST /api/upload/export` - å¯¼å‡ºExcelæ•°æ®

## é¡¹ç›®ç»“æ„

```
profit-management-system/
â”œâ”€â”€ client/                 # å‰ç«¯Reactåº”ç”¨
â”‚   â”œâ”€â”€ public/            # é™æ€èµ„æº
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/    # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/         # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ services/      # APIæœåŠ¡
â”‚   â”‚   â””â”€â”€ App.tsx        # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ models/                # æ•°æ®åº“æ¨¡å‹
â”œâ”€â”€ routes/                # APIè·¯ç”±
â”œâ”€â”€ server.js              # æœåŠ¡å™¨å…¥å£
â””â”€â”€ package.json           # åç«¯ä¾èµ–
```

## å¼€å‘è¯´æ˜

### æ·»åŠ æ–°åŠŸèƒ½
1. åœ¨åç«¯ `routes/` ç›®å½•æ·»åŠ æ–°çš„è·¯ç”±æ–‡ä»¶
2. åœ¨ `models/` ç›®å½•å®šä¹‰æ•°æ®æ¨¡å‹
3. åœ¨å‰ç«¯ `pages/` ç›®å½•æ·»åŠ æ–°é¡µé¢
4. åœ¨ `services/api.ts` ä¸­æ·»åŠ APIè°ƒç”¨

### æ•°æ®åº“è®¾è®¡
- **Profit**: åˆ©æ¶¦è®°å½•è¡¨
- **Department**: éƒ¨é—¨ä¿¡æ¯è¡¨

### å®‰å…¨ç‰¹æ€§
- è¯·æ±‚é¢‘ç‡é™åˆ¶
- æ–‡ä»¶ä¸Šä¼ ç±»å‹éªŒè¯
- æ•°æ®éªŒè¯å’Œæ¸…ç†
- CORSé…ç½®

## éƒ¨ç½²è¯´æ˜

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
1. è®¾ç½®ç¯å¢ƒå˜é‡
2. æ„å»ºå‰ç«¯åº”ç”¨: `cd client && npm run build`
3. å¯åŠ¨åç«¯æœåŠ¡: `npm start`

### Dockeréƒ¨ç½²ï¼ˆå¯é€‰ï¼‰
```dockerfile
# å¯ä»¥æ·»åŠ Dockerfileè¿›è¡Œå®¹å™¨åŒ–éƒ¨ç½²
```

## å¸¸è§é—®é¢˜

### Q: å¦‚ä½•ä¿®æ”¹ç«¯å£ï¼Ÿ
A: ä¿®æ”¹ `.env` æ–‡ä»¶ä¸­çš„ `PORT` å˜é‡

### Q: å¦‚ä½•è¿æ¥å…¶ä»–æ•°æ®åº“ï¼Ÿ
A: ä¿®æ”¹ `.env` æ–‡ä»¶ä¸­çš„ `MONGODB_URI` å˜é‡

### Q: å¯¼å…¥Excelæ–‡ä»¶å¤±è´¥ï¼Ÿ
A: æ£€æŸ¥æ–‡ä»¶æ ¼å¼æ˜¯å¦ç¬¦åˆæ¨¡æ¿è¦æ±‚ï¼Œç¡®ä¿å¿…å¡«å­—æ®µå®Œæ•´

## è®¸å¯è¯

MIT License

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ã€‚
